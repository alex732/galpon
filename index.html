<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Capell√°n Cloud | Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; text-align: center; }
        .card { background: #1e293b; padding: 20px; border-radius: 15px; border: 2px solid #3b82f6; width: 600px; margin: auto; }
        .video-box { width: 100%; height: 350px; background: #000; border-radius: 10px; margin-top: 15px; }
        img { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body>
    <h1>CAPELL√ÅN CLOUD üö¶</h1>
    <div class="card">
        <h3>VISTA DEL GALP√ìN (PUERTO 8085)</h3>
        <div class="video-box">
            <img id="foscam-img" src="">
        </div>
        <p id="debug-msg">Estado: Esperando servidor...</p>
    </div>

    <script>
        const PROXY = "http://192.168.2.208:8085/stream-galpon";
        
        setInterval(() => {
            const img = document.getElementById("foscam-img");
            const debug = document.getElementById("debug-msg");
            
            img.src = PROXY + "?t=" + Date.now();
            
            img.onload = () => debug.innerText = "‚úÖ Transmitiendo en vivo";
            img.onerror = () => debug.innerText = "‚ùå Error: ¬øEl servidor Java est√° corriendo?";
        }, 1200);

        // Firebase
        firebase.initializeApp({ databaseURL: "https://galpon-capellan-default-rtdb.firebaseio.com" });
        firebase.database().ref("galpon/actual").on("value", s => {
            // Aqu√≠ puedes a√±adir los valores de NH3 y Temp si quieres
        });
    </script>
</body>
</html>
