<!DOCTYPE html>
<html lang='es'>
<head>
    <meta charset='UTF-8'>
    <title>Zentinel Cloud v190</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #0f172a; color: #f8fafc; font-family: sans-serif; margin: 0; padding: 10px; font-size: 13px; }
        .layout { display: grid; grid-template-columns: 180px 1fr 300px; gap: 10px; }
        @media(max-width: 1000px) { .layout { grid-template-columns: 1fr; } }
        .card { background: #1e293b; border: 1px solid #334155; border-radius: 6px; padding: 10px; margin-bottom: 10px; }
        .gauge-box { background: #0f172a; border-radius: 50%; width: 90px; height: 90px; display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 0 auto 10px auto; border: 4px solid #334155; }
        .g-red { border-color: #ef4444; } .g-green { border-color: #22c55e; }
        .v-row { font-family: monospace; font-size: 10px; color: #94a3b8; border-bottom: 1px solid #334155; padding: 2px 0; }
        .video { width: 100%; border-radius: 6px; border: 1px solid #334155; }
        .ia-item { padding: 5px; border-bottom: 1px solid #334155; font-size: 11px; }
    </style>
</head>
<body>
    <h2 style="margin:0 0 10px 0;">ZENTINEL <span style="color:#38bdf8">CLOUD v190</span></h2>
    <div class="layout">
        <div>
            <div class="card">
                <div id="bgT" class="gauge-box"><b id="vT">--</b>T</div>
                <div id="bgH" class="gauge-box"><b id="vH">--</b>H</div>
                <div id="bgN" class="gauge-box"><b id="vN">--</b>N</div>
                <div id="bgR" class="gauge-box"><span id="vR" style="font-size:25px">☀️</span>LL</div>
                <div id="wp" style="background:#0f172a; padding:5px; font-size:10px; border-left:3px solid #38bdf8;">...</div>
            </div>
        </div>
        <div>
            <div id="banner"></div>
            <img id="live" class="video" src="">
            <div class="card" style="margin-top:10px; height:150px; overflow:auto;">
                <b>HISTORIAL IA</b>
                <div id="recs"></div>
            </div>
        </div>
        <div>
            <div class="card"><b>VERBOSE SISTEMA</b><div id="v-log" style="height:150px; overflow:auto;"></div></div>
            <div class="card"><b>SISTEMA</b><div id="stats" style="font-size:10px;"></div></div>
            <iframe width="100%" height="150" src="https://embed.windy.com/embed2.html?lat=19.7&lon=-70.7&zoom=7"></iframe>
        </div>
    </div>
    <script>
        var firebaseConfig = { databaseURL: "https://zentinel-ia-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        firebase.database().ref('zentinel').on('value', (s) => {
            const d = s.val(); if(!d) return;
            document.getElementById('vT').innerText = d.t; document.getElementById('bgT').className = 'gauge-box '+(parseFloat(d.t)>30?'g-red':'g-green');
            document.getElementById('vH').innerText = d.h; document.getElementById('bgH').className = 'gauge-box '+(parseFloat(d.h)>75?'g-red':'g-green');
            document.getElementById('vR').innerText = d.r=='SI'?'⛈️':'☀️';
            document.getElementById('wp').innerText = d.wp;
            document.getElementById('banner').innerHTML = d.banner;
            document.getElementById('recs').innerHTML = d.recs;
            document.getElementById('v-log').innerHTML = d.v;
            document.getElementById('stats').innerHTML = "IP: "+d.piIP+"<br>STATUS: "+d.mot+"<br>TS: "+d.ts;
            if(d.img) document.getElementById('live').src = "data:image/jpeg;base64," + d.img;
        });
    </script>
</body>
</html>
