<script>
    // CONFIGURACIÓN FIREBASE
    const firebaseConfig = {
        databaseURL: "https://galpon-capellan-default-rtdb.firebaseio.com"
    };
    
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // DATOS DE LA CÁMARA
    const cam_url = "http://192.168.2.193:88/cgi-bin/CGIProxy.fcgi?cmd=getLiveStream&usr=admin&pwd=7324088";

    // Intentar cargar video
    document.getElementById('foscam-video').src = cam_url;

    // ESCUCHAR DATOS (Asegúrate de que tu Arduino use estas etiquetas)
    database.ref('/').on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            console.log("Datos recibidos:", data);
            // Actualizar Amoníaco (si la etiqueta en Arduino es 'amoniaco')
            if (data.amoniaco !== undefined) {
                gNH3.set(data.amoniaco);
                document.getElementById('val-nh3').innerText = data.amoniaco;
            }
            // Actualizar Temperatura (si la etiqueta en Arduino es 'temperatura')
            if (data.temperatura !== undefined) {
                gTemp.set(data.temperatura);
                document.getElementById('val-temp').innerText = data.temperatura;
            }
        }
    });
</script>
