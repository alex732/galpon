<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZENTINEL AI | REMOTE LITE</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --border: #334155;
            --neon: #38bdf8;
            --ok: #22c55e;
            --error: #ef4444;
        }

        body {
            background: var(--bg);
            color: #f8fafc;
            font-family: sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header {
            width: 100%;
            background: #020617;
            border-bottom: 2px solid var(--border);
            padding: 15px 0;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .brand {
            font-size: 20px;
            font-weight: 900;
            color: var(--neon);
            letter-spacing: 2px;
        }

        .container {
            width: 95%;
            max-width: 600px;
            margin-top: 20px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            position: relative;
        }

        .card-h {
            font-size: 10px;
            color: var(--neon);
            text-transform: uppercase;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .val {
            font-size: 28px;
            font-weight: bold;
        }

        .unit {
            font-size: 14px;
            color: #94a3b8;
        }

        .alert-box {
            grid-column: span 2;
            background: #450a0a;
            border: 1px solid var(--error);
            color: #f87171;
            padding: 10px;
            border-radius: 8px;
            font-size: 13px;
            font-family: monospace;
            display: none; /* Se activa si hay alertas */
        }

        .status-bar {
            grid-column: span 2;
            font-size: 11px;
            color: #94a3b8;
            display: flex;
            justify-content: space-between;
            padding: 5px;
        }

        .dot {
            height: 8px;
            width: 8px;
            background-color: var(--ok);
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            box-shadow: 0 0 8px var(--ok);
        }

        #rain-icon { font-size: 40px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="brand">ZENTINEL REMOTE v281</div>
    </div>

    <div class="container">
        <div class="grid">
            <div class="card">
                <div class="card-h">Temperatura</div>
                <div class="val"><span id="temp">--</span><span class="unit">¬∞C</span></div>
            </div>
            <div class="card">
                <div class="card-h">Humedad</div>
                <div class="val"><span id="hum">--</span><span class="unit">%</span></div>
            </div>
            <div class="card">
                <div class="card-h">Amon√≠aco (NH3)</div>
                <div class="val"><span id="nh3">--</span><span class="unit">ppm</span></div>
            </div>
            <div class="card">
                <div class="card-h">Lluvia</div>
                <div id="rain-icon">‚òÄÔ∏è</div>
            </div>

            <div id="alert-card" class="alert-box">
                <b>‚ö†Ô∏è ALERTA IA:</b> <span id="ia-msg">Analizando...</span>
            </div>

            <div class="card" style="grid-column: span 2; text-align: left;">
                <div class="card-h">Estado del Sistema</div>
                <div style="font-size: 12px;">
                    <div>‚öôÔ∏è Motor PTZ: <span id="motor" style="color:var(--neon)">--</span></div>
                    <div>üïí √öltima Sincronizaci√≥n: <span id="sync">--</span></div>
                </div>
            </div>

            <div class="status-bar">
                <div><span class="dot"></span> LIVE FROM PUERTO PLATA</div>
                <div id="status-text">CONECTADO A FIREBASE</div>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURACI√ìN DE FIREBASE ---
        // Pega aqu√≠ tus credenciales de Firebase Console
        const firebaseConfig = {
            databaseURL: "https://zentinel-ai-default-rtdb.firebaseio.com"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database().ref('status');

        // Escuchar cambios en tiempo real
        db.on('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                // Actualizar UI
                document.getElementById('temp').innerText = data.temp;
                document.getElementById('hum').innerText = data.hum;
                document.getElementById('nh3').innerText = data.nh3;
                document.getElementById('motor').innerText = data.motor;
                document.getElementById('sync').innerText = data.lastUpdate;
                
                // Lluvia
                document.getElementById('rain-icon').innerText = data.rain === "SI" ? "‚õàÔ∏è" : "‚òÄÔ∏è";

                // Alertas IA
                const alertBox = document.getElementById('alert-card');
                const iaMsg = document.getElementById('ia-msg');
                if (data.iaAlert && data.iaAlert !== "Sin alertas" && data.iaAlert !== "Analizando...") {
                    alertBox.style.display = "block";
                    iaMsg.innerText = data.iaAlert;
                } else {
                    alertBox.style.display = "none";
                }
            }
        }, (error) => {
            document.getElementById('status-text').innerText = "ERROR DE CONEXI√ìN";
            document.getElementById('status-text').style.color = "var(--error)";
        });
    </script>
</body>
</html>
