<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Capell√°n Cloud | Dashboard</title>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .video-box { width: 600px; height: 350px; background: #000; margin: 20px auto; border: 3px solid #3b82f6; border-radius: 15px; overflow: hidden; display: flex; align-items: center; justify-content: center; position: relative;}
        img { width: 100%; height: 100%; object-fit: contain; display: none; }
        .btn { background: #22c55e; color: white; padding: 15px 30px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .status { margin-top: 10px; font-size: 14px; color: #94a3b8; }
    </style>
</head>
<body>
    <h1>CAPELL√ÅN CLOUD üö¶</h1>
    <button class="btn" onclick="iniciar()">ACTIVAR VIDEO</button>
    <div class="video-box">
        <img id="foscam" src="">
        <div id="loading">Esperando se√±al del Proxy...</div>
    </div>
    <p id="debug-info" class="status">Estado: Listo para conectar</p>

    <script>
        const PROXY = "http://192.168.2.208:9005/stream-galpon";

        function iniciar() {
            const img = document.getElementById("foscam");
            const debug = document.getElementById("debug-info");
            const loading = document.getElementById("loading");

            debug.innerText = "Intentando conectar al PC (192.168.2.208)...";

            setInterval(() => {
                const testImg = new Image();
                testImg.src = PROXY + "?t=" + Date.now();
                
                testImg.onload = () => {
                    img.src = testImg.src;
                    img.style.display = "block";
                    loading.style.display = "none";
                    debug.innerText = "‚úÖ TRANSMITIENDO EN VIVO";
                    debug.style.color = "#22c55e";
                };

                testImg.onerror = () => {
                    debug.innerText = "‚ùå ERROR: El servidor Java no est√° entregando la imagen.";
                    debug.style.color = "#ef4444";
                };
            }, 1000);
        }
    </script>
</body>
</html>
